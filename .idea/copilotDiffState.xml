<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/services/AudioService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/services/AudioService.java" />
              <option name="originalContent" value="package services;&#10;&#10;import base.APIControlActions;&#10;import base.ScreeningControl;&#10;import entity.AudioPojo.AudioAnswerPayLoad;&#10;import entity.AudioPojo.AudioFileGeneratorPayLoad;&#10;import io.restassured.response.Response;&#10;import utility.JavaToJSON;&#10;&#10;import java.util.HashMap;&#10;import java.util.List;&#10;import java.util.Map;&#10;&#10;import static base.ScreeningControl.jobApplicationId;&#10;import static base.ScreeningControl.jobRoleId;&#10;&#10;public class AudioService extends APIControlActions {&#10;&#10;    public Response submitAudioAnswer(String questionId, String experience) {&#10;        Response audioFileResponse = generateAudioURL();&#10;        audioFileResponse.then().log().all();&#10;        String audioFileId = audioFileResponse.jsonPath().getString(&quot;fileId&quot;);&#10;        String audioFileUploadURL = audioFileResponse.jsonPath().getString(&quot;azureUpload.uploadUrl&quot;);&#10;        System.out.println(audioFileId);&#10;        System.out.println(audioFileUploadURL);&#10;        Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();&#10;        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);&#10;        headers.put(&quot;Accept&quot;, &quot;application/json&quot;);&#10;        setHeaders(headers);&#10;&#10;        String payload = getAudioServicePayLoad(questionId, experience, audioFileId);&#10;        setBody(payload);&#10;&#10;        Response audioAnswerResponse = executePatchAPI(&quot;/api/candidateScreening/update-candidate-result/&quot;+ScreeningControl.candidateScreeningId);&#10;&#10;        return  audioAnswerResponse;&#10;    }&#10;&#10;    private Response generateAudioURL() {&#10;        AudioFileGeneratorPayLoad payload = AudioFileGeneratorPayLoad.builder()&#10;                .originalFilename(&quot;recordedAudio.webm&quot;)&#10;                .fileType(&quot;audio&quot;)&#10;                .mimeType(&quot;audio/webm&quot;)&#10;                .build();&#10;&#10;        Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();&#10;        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);&#10;        headers.put(&quot;Accept&quot;, &quot;application/json&quot;);&#10;        setHeaders(headers);&#10;&#10;        String jsonPayLoad = JavaToJSON.convertToJSON(payload);&#10;        setBody(jsonPayLoad);&#10;&#10;        return executePostAPI(&quot;/api/candidateScreening/generate-upload-url&quot;);&#10;    }&#10;&#10;    private String getAudioServicePayLoad(String questionId, String experience, String audioFileId) {&#10;        AudioAnswerPayLoad audioAnswerPayLoad = AudioAnswerPayLoad.builder()&#10;                .questionId(questionId)&#10;                .type(&quot;audio&quot;)&#10;                .skill(&quot;api&quot;)&#10;                .jobRoleId(ScreeningControl.jobRoleId)&#10;                .experience(experience)&#10;                .jobApplicationId(ScreeningControl.jobApplicationId)&#10;                .timeSpent(75)&#10;                .fullScreenExitCount(0)&#10;                .tabSwitchCount(1)&#10;                .candidateAnswer(null)&#10;                .answerAudioFileId(&quot;audio_file_987654&quot;)&#10;                .retakes(0)&#10;                .copyPasteAnalysis(&#10;                        AudioAnswerPayLoad.CopyPasteAnalysis.builder()&#10;                                .totalDuration(90)&#10;                                .totalCopyEvents(2)&#10;                                .questionCopyCount(1)&#10;                                .optionCopyCount(0)&#10;                                .fullQuestionCopyCount(1)&#10;                                .hasQuestionCopying(true)&#10;                                .hasOptionCopying(false)&#10;                                .hasFullQuestionCopying(true)&#10;                                .riskScore(40)&#10;                                .riskLevel(&quot;low&quot;)&#10;                                .isSuspicious(false)&#10;                                .sessionId(&quot;audio_1766289626529&quot;)&#10;                                .analysisVersion(&quot;1.0&quot;)&#10;                                .timestamp(&quot;2025-12-21T04:15:30.000Z&quot;)&#10;                                .copyBreakdown(&#10;                                        AudioAnswerPayLoad.CopyBreakdown.builder()&#10;                                                .questionCopies(&#10;                                                        AudioAnswerPayLoad.QuestionCopies.builder()&#10;                                                                .count(1)&#10;                                                                .averageLength(35)&#10;                                                                .timestamps(List.of())&#10;                                                                .build()&#10;                                                )&#10;                                                .optionCopies(&#10;                                                        AudioAnswerPayLoad.OptionCopies.builder()&#10;                                                                .count(0)&#10;                                                                .averageLength(0)&#10;                                                                .timestamps(List.of())&#10;                                                                .build()&#10;                                                )&#10;                                                .fullQuestionCopies(&#10;                                                        AudioAnswerPayLoad.FullQuestionCopies.builder()&#10;                                                                .count(1)&#10;                                                                .averageLength(95)&#10;                                                                .timestamps(List.of())&#10;                                                                .build()&#10;                                                )&#10;                                                .build()&#10;                                )&#10;                                .build()&#10;                )&#10;                .hasCopyPasteAnalysis(true)&#10;                .build();&#10;        return JavaToJSON.convertToJSON(audioAnswerPayLoad);&#10;    }&#10;&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package services;&#10;&#10;import base.APIControlActions;&#10;import base.ScreeningControl;&#10;import entity.AudioPojo.AudioAnswerPayLoad;&#10;import entity.AudioPojo.AudioFileGeneratorPayLoad;&#10;import io.qameta.allure.Step;&#10;import io.restassured.response.Response;&#10;import utility.JavaToJSON;&#10;&#10;import java.util.HashMap;&#10;import java.util.List;&#10;import java.util.Map;&#10;&#10;import static base.ScreeningControl.jobApplicationId;&#10;import static base.ScreeningControl.jobRoleId;&#10;&#10;public class AudioService extends APIControlActions {&#10;&#10;    @Step(&quot;Submit audio answer for question ID: {questionId} with experience: {experience}&quot;)&#10;    public Response submitAudioAnswer(String questionId, String experience) {&#10;        Response audioFileResponse = generateAudioURL();&#10;        audioFileResponse.then().log().all();&#10;        String audioFileId = audioFileResponse.jsonPath().getString(&quot;fileId&quot;);&#10;        String audioFileUploadURL = audioFileResponse.jsonPath().getString(&quot;azureUpload.uploadUrl&quot;);&#10;        System.out.println(audioFileId);&#10;        System.out.println(audioFileUploadURL);&#10;        Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();&#10;        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);&#10;        headers.put(&quot;Accept&quot;, &quot;application/json&quot;);&#10;        setHeaders(headers);&#10;&#10;        String payload = getAudioServicePayLoad(questionId, experience, audioFileId);&#10;        setBody(payload);&#10;&#10;        Response audioAnswerResponse = executePatchAPI(&quot;/api/candidateScreening/update-candidate-result/&quot;+ScreeningControl.candidateScreeningId);&#10;&#10;        return  audioAnswerResponse;&#10;    }&#10;&#10;    @Step(&quot;Generate audio file upload URL&quot;)&#10;    private Response generateAudioURL() {&#10;        AudioFileGeneratorPayLoad payload = AudioFileGeneratorPayLoad.builder()&#10;                .originalFilename(&quot;recordedAudio.webm&quot;)&#10;                .fileType(&quot;audio&quot;)&#10;                .mimeType(&quot;audio/webm&quot;)&#10;                .build();&#10;&#10;        Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();&#10;        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);&#10;        headers.put(&quot;Accept&quot;, &quot;application/json&quot;);&#10;        setHeaders(headers);&#10;&#10;        String jsonPayLoad = JavaToJSON.convertToJSON(payload);&#10;        setBody(jsonPayLoad);&#10;&#10;        return executePostAPI(&quot;/api/candidateScreening/generate-upload-url&quot;);&#10;    }&#10;&#10;    @Step(&quot;Build audio answer payload for question ID: {questionId}&quot;)&#10;    private String getAudioServicePayLoad(String questionId, String experience, String audioFileId) {&#10;        AudioAnswerPayLoad audioAnswerPayLoad = AudioAnswerPayLoad.builder()&#10;                .questionId(questionId)&#10;                .type(&quot;audio&quot;)&#10;                .skill(&quot;api&quot;)&#10;                .jobRoleId(ScreeningControl.jobRoleId)&#10;                .experience(experience)&#10;                .jobApplicationId(ScreeningControl.jobApplicationId)&#10;                .timeSpent(75)&#10;                .fullScreenExitCount(0)&#10;                .tabSwitchCount(1)&#10;                .candidateAnswer(null)&#10;                .answerAudioFileId(&quot;audio_file_987654&quot;)&#10;                .retakes(0)&#10;                .copyPasteAnalysis(&#10;                        AudioAnswerPayLoad.CopyPasteAnalysis.builder()&#10;                                .totalDuration(90)&#10;                                .totalCopyEvents(2)&#10;                                .questionCopyCount(1)&#10;                                .optionCopyCount(0)&#10;                                .fullQuestionCopyCount(1)&#10;                                .hasQuestionCopying(true)&#10;                                .hasOptionCopying(false)&#10;                                .hasFullQuestionCopying(true)&#10;                                .riskScore(40)&#10;                                .riskLevel(&quot;low&quot;)&#10;                                .isSuspicious(false)&#10;                                .sessionId(&quot;audio_1766289626529&quot;)&#10;                                .analysisVersion(&quot;1.0&quot;)&#10;                                .timestamp(&quot;2025-12-21T04:15:30.000Z&quot;)&#10;                                .copyBreakdown(&#10;                                        AudioAnswerPayLoad.CopyBreakdown.builder()&#10;                                                .questionCopies(&#10;                                                        AudioAnswerPayLoad.QuestionCopies.builder()&#10;                                                                .count(1)&#10;                                                                .averageLength(35)&#10;                                                                .timestamps(List.of())&#10;                                                                .build()&#10;                                                )&#10;                                                .optionCopies(&#10;                                                        AudioAnswerPayLoad.OptionCopies.builder()&#10;                                                                .count(0)&#10;                                                                .averageLength(0)&#10;                                                                .timestamps(List.of())&#10;                                                                .build()&#10;                                                )&#10;                                                .fullQuestionCopies(&#10;                                                        AudioAnswerPayLoad.FullQuestionCopies.builder()&#10;                                                                .count(1)&#10;                                                                .averageLength(95)&#10;                                                                .timestamps(List.of())&#10;                                                                .build()&#10;                                                )&#10;                                                .build()&#10;                                )&#10;                                .build()&#10;                )&#10;                .hasCopyPasteAnalysis(true)&#10;                .build();&#10;        return JavaToJSON.convertToJSON(audioAnswerPayLoad);&#10;    }&#10;&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>